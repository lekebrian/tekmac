<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="favicon" href="logoo.ico" type="image/x-icon">
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        body {
            display: flex;
            min-height: 100vh;
            background-color: #f5f5f5;
        }
        a{
            text-decoration: none;
            color: #fff;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: #1a1a1a;
            color: white;
            padding: 20px;
            display: flex;
            flex-direction: column;
            border-right: 2px solid #ffd700;
            position: fixed;
            height: 100vh;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 40px;
        }
           .profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .profile-img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin: 8px 0;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            color: #888;
            gap: 12px;
        }

        .menu-item:hover {
            background-color: #333;
            color: white;
        }

        .menu-item.active {
            background-color: #333;
            color: white;
        }
        button{
            border: none;
            padding: 0;
        }
.btnn{
    padding: 10px;
    border-radius: 5px;
    background-color:#ffd700 ;
}
.btnn:hover{
      background-color:#eedc76 ;
}
        .menu-item i {
            width: 24px;
            height: 24px;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 250px;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #f8f8f8;
            padding: 8px;
            border-radius: 8px;
        }

        .user-profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
        }

        .welcome-banner {
            background-color: #ffd700;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .welcome-text h1 {
            font-size: 2.5em;
            color: #000;
            margin-bottom: 10px;
        }

        .popular-topics {
            margin-bottom: 30px;
        }

        .topic-cards {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .topic-card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            flex: 1;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .topic-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
        }

        .web-dev-icon { background: #e0e7ff; }
        .networking-icon { background: #dcfce7; }
        .cisco-icon { background: #dbeafe; }

        .web-dev-text { color: #6366f1; }
        .networking-text { color: #22c55e; }
        .cisco-text { color: #3b82f6; }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .content-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .see-more {
            color: #6366f1;
            text-decoration: none;
        }

        .course-item {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .course-icon {
            width: 40px;
            height: 40px;
            background: #fff3dc;
            border-radius: 8px;
        }

        .course-info h3 {
            margin-bottom: 5px;
        }

        .course-info p {
            color: #666;
            font-size: 0.9em;
        }

        .click-to-see {
            color: #ffd700;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                bottom: 0;
                width: 100%;
                height: auto;
                flex-direction: row;
                justify-content: space-around;
                padding: 10px;
                z-index: 1000;
            }

            .logo, .menu-item span {
                display: none;
            }

            .menu-item {
                padding: 8px;
                margin: 0;
            }

            .main-content {
                margin-left: 0;
                padding-bottom: 70px;
            }

            .content-grid {
                grid-template-columns: 1fr;
            }

            .topic-cards {
                flex-direction: column;
            }
        }

        /* Tab Content */
        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <div class="logo">

        </div>
        <div class="menu-item active" data-tab="dashboard">
            <i class="fas fa-chart-line"></i>
            <span>Dashboard</span>
        </div>
        <div class="menu-item" data-tab="assessments">
          <i class="fas fa-tasks"></i>
            <span><a href="assess.html">Assessments</a></span>
        </div>
        <div class="menu-item" data-tab="learning">
            <i class="fas fa-book"></i>
            <span>Learning</span>
        </div>
        <div class="menu-item" data-tab="statistics">
            <i class="fas fa-chart-bar"></i>
            <span><a href="statistics.html">Statistics</a></span>
        </div>

         <div class="menu-item" data-tab="statistics">
            <i class="fas fa-house"></i>
            <span><a href="index.html">Go to Home</a></span>
        </div>
       
        <div style="margin-top: auto;">
          
            <div class="menu-item" id="logout">
                 <i class="fas fa-sign-out-alt"></i>
                <span>Log out</span>
            </div>
        </div>
    </div>

    <div class="main-content">
        <!-- Dashboard Tab -->
         <div id="dashboard" class="tab-content active">
                <div class="header">
                    <h1>Dashboard</h1>
                      <div class="profile">
                    <img src="https://images.unsplash.com/photo-1507679799987-c73779587ccf" alt="Profile" class="profile-img">
                    <span>Tayo</span>
                </div>
                </div>
    
                <div class="welcome-banner">
                    <div class="welcome-text">
                        <h1 id="greeting"></h1>
                        <p>Ready to achieve educational excellence?</p>
                    </div>
                    
                </div>

            <div class="popular-topics">
                <h2>Popular topic</h2>
                <div class="topic-cards">
                    <div class="topic-card">
                        <div class="topic-icon web-dev-icon"></div>
                        <span class="web-dev-text">Web development</span>
                    </div>
                    <div class="topic-card">
                        <div class="topic-icon networking-icon"></div>
                        <span class="networking-text">Networking</span>
                    </div>
                    <div class="topic-card">
                        <div class="topic-icon cisco-icon"></div>
                        <span class="cisco-text">System Admin</span>
                    </div>
                </div>
            </div>

            <div class="content-grid">
                <div class="content-section">
                    <div class="section-header">
                        <h2>New courses</h2>
                        <a href="courses.html" class="see-more">See more →</a>
                    </div>
                    <div class="course-item">
                        <div class="course-icon"></div>
                        <div class="course-info">
                            <h3>The basics of HTML and CSS</h3>
                            <p>Learn the basic of html and css to start building your own website from scratch and start your developer career.</p>
                           <button class="btnn" onclick="crs()">Click here</button>
                           <script>
                            function crs(){
    window.location.href = "courses.html"
}
                           </script>
                        </div>
                    </div>
                    <div class="course-item">
                        <div class="course-icon"></div>
                        <div class="course-info">
                            <h3>Intro To Networking</h3>
                            <p>Learn how to code complete and efficient web app, website, Mobile App using AI</p>
                            <button class="btnn" onclick="crrs()">Click here</button>
                           <script>
                            function crrs(){
    window.location.href = "networking.html"
}
                           </script>
                        </div>
                    </div>
                </div>

                <div class="content-section">
                    <div class="section-header">
                        <h2>Assessments</h2>
                        <a href="assess.html" class="see-more">See more →</a>
                    </div>
                    <div class="course-item">
                        <div class="course-icon"></div>
                        <div class="course-info">
                            <h3>Web development Assessments</h3>
                            <p>Learn the basic of html and css to start building your own website from scratch and start your developer career.</p>
                            <button class="btnn" onclick="crss()">Click here</button>
                           <script>
                            function crss(){
    window.location.href = "assess.html"
}
                           </script>
                        </div>
                    </div>
                    <div class="course-item">
                        <div class="course-icon"></div>
                        <div class="course-info">
                            <h3>Real World Projects</h3>
                            <p>Learn how to solve real world projects in real time</p>
                           <button class="btnn" onclick="crse()">Click here</button>
                           <script>
                            function crse(){
    window.location.href = "practical.html"
}
                           </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Assessments Tab -->
        <div id="assessments" class="tab-content">
            <div class="header">
                <h1>Assessments</h1>
                <div class="user-profile">
                    <img src="/api/placeholder/40/40" alt="user">
                    <span id="assessments-username"></span>
                </div>
            </div>
          
        </div>

        <!-- Learning Tab -->
        <div id="learning" class="tab-content">
            <div class="header">
                <h1>Learning</h1>
                <div class="user-profile">
                    <img src="/api/placeholder/40/40" alt="user">
                    <span id="learning-username"></span>
                </div>
            </div>
            <div class="content-section">
                <h2>My Courses</h2>
                <div class="course-item">
                    <div class="course-icon"></div>
                    <div class="course-info">
                        <h3>JavaScript Fundamentals</h3>
                        <p>Progress: 65%</p>
                        <div class="progress-bar"></div>
                    </div>
                </div>
                <!-- Add more course items -->
            </div>
        </div>

        <!-- Statistics Tab -->
        <div id="statistics" class="tab-content">
            <div class="header">
                <h1>Statistics</h1>
                <div class="user-profile">
                    <img src="/api/placeholder/40/40" alt="user">
                    <span id="statistics-username"></span>
                </div>
            </div>
            <div class="content-section">
                <h2>Learning Progress</h2>
                <!-- Add progress charts and statistics -->
            </div>
        </div>

        <!-- Other tabs... -->
         <!-- dashboard.html: Add this section -->

<!-- Replace your #run-ads-section with this improved version -->
<div id="run-ads-section" class="content-section" style="max-width: 500px; margin: 40px auto 0 auto;">
  <h2 style="margin-bottom: 20px; color: #222;">Run an Ad</h2>
  <form id="adsForm" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 16px;">
    <div>
      <label style="font-weight: 500; color: #444;">Choose Ad Schedule:</label>
      <select name="schedule" required style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ddd; margin-top: 4px;">
        <option value="daily">Daily (200f)</option>
        <option value="weekly">Weekly (1000f)</option>
        <option value="monthly">Monthly (3500f)</option>
      </select>
    </div>
    <div>
      <label style="font-weight: 500; color: #444;">Upload Photo:</label>
      <input type="file" name="image" accept="image/*" required style="width: 100%; padding: 8px; border-radius: 6px; border: 1px solid #ddd; margin-top: 4px;">
    </div>
    <input type="text" name="business_name" placeholder="Business Name" required style="padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
    <input type="text" name="location" placeholder="Location" required style="padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
    <textarea name="description" placeholder="Description" required style="padding: 10px; border-radius: 6px; border: 1px solid #ddd; min-height: 80px;"></textarea>
    <input type="tel" name="phone" id="phone" placeholder="Phone Number" required style="padding: 10px; border-radius: 6px; border: 1px solid #ddd;">
    <input type="hidden" name="user_id" id="user_id" required>
    <button type="submit" class="btnn" style="width: 100%; font-weight: 600; font-size: 1.1em;">Proceed to Pay & Post</button>
    <div id="adsResponse" style="text-align: center; margin-top: 8px; color: #22c55e; font-weight: 500;"></div>
  </form>
</div>
<script>
    // Function to get userId from localStorage and set it in the hidden input
    function gettem() {
        const userId = localStorage.getItem('userId');
        if (userId) {
            const userInput = document.getElementById('user_id');
            if (userInput) userInput.value = userId;
        }
    }

    // Call gettem on page load
    document.addEventListener('DOMContentLoaded', function() {
        gettem();
    });

  
    // ...existing code for gettem() and DOMContentLoaded...

    document.getElementById('adsForm').addEventListener('submit', async function(e) {
        e.preventDefault();
        const formData = new FormData(this);

        // Get schedule and amount
        const schedule = formData.get('schedule');
        let amount = 0;
        if (schedule === 'daily') amount = 200;
        if (schedule === 'weekly') amount = 1000;
        if (schedule === 'monthly') amount = 3500;
        formData.set('amount', amount);

        // Get phone number
        const phone = formData.get('phone');
        if (!phone) {
            document.getElementById('adsResponse').textContent = "Phone number is required.";
            return;
        }

        // 1. Initiate payment via Nkwa API
        const paymentRes = await fetch('/api/nkwa-collect', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ phone, amount })
        });
        const paymentData = await paymentRes.json();

        if (!paymentData.success) {
            document.getElementById('adsResponse').textContent = paymentData.error || "Payment initiation failed.";
            return;
        }

        // 2. Ask user to confirm payment (simple confirm dialog)
        const confirmed = confirm("Please confirm the payment on your phone. Click OK after you have paid.");
        if (!confirmed) {
            document.getElementById('adsResponse').textContent = "Payment not confirmed.";
            return;
        }

        // 3. Post the ad only after payment confirmation
        const adRes = await fetch('/api/ads', {
            method: 'POST',
            body: formData
        });
        const adData = await adRes.json();
        document.getElementById('adsResponse').textContent = adData.success ? '✅ Ad posted!' : adData.error;
        if (adData.success) {
            window.location.href = 'ads.html';
        }
    });
    

    // Tab switching functionality
    document.querySelectorAll('.menu-item').forEach(item => {
        item.addEventListener('click', function() {
            if (!this.dataset.tab) return; // Skip for logout button
            document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
            this.classList.add('active');
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(this.dataset.tab).classList.add('active');
        });
    });

    // Get username from query parameter or local storage
    const urlParams = new URLSearchParams(window.location.search);
    const username = urlParams.get('username') || localStorage.getItem('username');

    // Set the username and greeting
    if (username) {
        document.getElementById('username').textContent = username;
        document.getElementById('greeting').textContent = `Hello ${username}!`;
        document.getElementById('assessments-username').textContent = username;
        document.getElementById('learning-username').textContent = username;
        document.getElementById('statistics-username').textContent = username;
    } else {
        document.getElementById('greeting').textContent = "Hello Guest!";
        console.error("Username not found!");
    }

    // LOGOUT: Remove PHP, use JS only
    document.getElementById('logout').addEventListener('click', function(event) {
        event.preventDefault();
        localStorage.removeItem('userId');
        localStorage.removeItem('username');
        localStorage.removeItem('token');
        window.location.href = 'login.html';
    });

    // Mobile responsive menu
    function checkMobile() {
        if (window.innerWidth <= 768) {
            document.querySelector('.sidebar').classList.add('mobile');
        } else {
            document.querySelector('.sidebar').classList.remove('mobile');
        }
    }
    window.addEventListener('resize', checkMobile);
    checkMobile(); // Initial check
</script>
</body>
</html>